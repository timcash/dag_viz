# 3D DAG Visualization

A high-performance, immersive 3D visualization for Directed Acyclic Graphs (DAGs), built with **Three.js** and **Bun**. This project features spline-based camera navigation, context-aware nested layouts, and weighted edge rendering to explore complex hierarchical data.

![Smoke Test Status](https://img.shields.io/badge/smoke%20test-passing-success)

## âœ¨ Key Features

### ğŸ¥ Spline-Based Fly-Through Navigation
Experience a seamless "traveling" sensation as you navigate through the graph. Clicking a node triggers a cinematic camera flight path that swoops *through* the selected node to reveal the sublayer below, providing a strong sense of depth and hierarchy.

### ğŸ’¡ Weighted Edge Glow
Edges are rendered with variable opacity and color intensity based on their "weight" (simulated randomness for demo).
- **High Weight**: Bright white/cyan, fully opaque.
- **Low Weight**: Dim blue, semi-transparent.
This visual hierarchy makes important connections instantly pop.

### ğŸ§© Context-Aware Nested Layouts
Sublayers are dynamically generated and positioned directly **below** their parent node in 3D space. This maintains spatial contextâ€”when you drill down, you are literally looking "under the hood" of the specific node you selected.

### ğŸ§ª Robust Smoke Testing
Includes a comprehensive automated smoke test suite powered by **Puppeteer**. 
- Verified rendering of nodes, labels, and curved edges.
- Automated verification of camera transitions and log outputs.
- Integrated **Pixel Verification** for mathematical visual proof.
- Generates a visual report `src/TEST.md` with logs, timestamps, and screenshots.

## ğŸ› ï¸ Project Evolution & Scaffolding

This project uses an iterative development model where new versions (`src3`, `src4`, etc.) are scaffolded to focus on specific domains (e.g., Hover Logic, Camera Movement).

### Template Generator
A custom tool `template_src.ts` is used to bootstrap new version directories with a complete testing environment.

**Scaffold a new version:**
```bash
bun run template_src.ts srcN
```
This command:
1. Creates the folder structure (`srcN/test/lib`, `srcN/screenshots`).
2. Skeletons the `App` and `Stage`.
3. Generates 5 failing test templates ready for implementation.
4. Auto-verifies that the new environment (Server + Puppeteer) is functional.

## ğŸš€ Getting Started

### Prerequisites
- [Bun](https://bun.sh) (v1.0+)

### Installation
```bash
bun install
```

### Development
Start the v2 development server:
```bash
bun run dev
```
Open [http://localhost:3000](http://localhost:3000) to view the graph.

### Running Tests
Run the full v2 test suite:
```bash
bun run test_v2
```

Run a specific version suite (e.g., v4):
```bash
bun run test_src4
```

These commands will:
1. Start a fresh server instance on Port 3001.
2. Launch a browser to interact with the specific version.
3. Capture screenshots and perform **Pixel Verification**.
4. Incrementally update the version's `TEST.md` report.

## ğŸ® Controls
- **Left Click**: Select a node and "fly through" to its sublayer.
- **Scroll Wheel**: Zoom in/out. Auto-navigates up when zooming out far enough.
- **Double Click**: Create a new node at the cursor position (Demo).
- **WASD**: Pan the camera.

## ğŸ—ï¸ Tech Stack
- **Runtime**: Bun
- **Graphics**: Three.js
- **Testing**: Puppeteer (Headed/Headless)
- **Linting**: ESLint (Flat Config + TypeScript)
- **Reporting**: Automated Markdown with Pixel Verification


---
*Generated by Antigravity*
